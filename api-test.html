
<!doctype html><html><head><meta charset="utf-8"><title>API Test</title>
<link rel="stylesheet" href="app.css"></head><body>
<h3>API Test: /api/search</h3>
<div class="card"><button id="btn">Run BA Entry</button> <button id="btn2">Run DA Entry</button><pre id="out" class="mono"></pre></div>
<script>
async function run(role){
  const url = new URL('/api/search', location.origin);
  url.searchParams.set('query', role==='ba' ? 'Business Analyst in Ontario, Canada' : 'Data Analyst in Ontario, Canada');
  url.searchParams.set('role', role);
  url.searchParams.set('date_posted','today'); url.searchParams.set('page','1'); url.searchParams.set('num_pages','1');
  const res = await fetch(url); const txt = await res.text();
  document.getElementById('out').textContent = 'Status '+res.status+'\n\n'+txt.slice(0,2000);
}
document.getElementById('btn').onclick = ()=>run('ba');
document.getElementById('btn2').onclick = ()=>run('da');
</script></body></html>
